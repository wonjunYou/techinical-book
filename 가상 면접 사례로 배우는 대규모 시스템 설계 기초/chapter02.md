# 개략적인 규모 추정

### 2의 제곱수

|2의 x제곱|  근사치   |   이름    | 축약형  |
|:---:|:------:|:-------:|:----:|
|10|   1천   | 1킬로바이트  | 1KB  |
|20|  1백만   | 1메가바이트  | 1MB  |
|30|  10억   | 1기가바이트  | 1GB  |
|40|   1조   | 1테라바이트  | 1TB  |
|50| 1000조  | 1페타바이트  | 1PB  |


### 응답지연 값(2010년 기준)

|연산명|       시간        |
|:----:|:---------------:|
|L1 캐시참조|      0.5ns      |
|L2 캐시참조|       7ns       |
|zippy로 1kb 압축 |  10us(10000ns)  |
| 1Gbps 네트워크로 1kb 전송 |      10us       |
|메모리에서 1MB 순차 READ | 250us (250만 ns) |
| 같은 데이터센터 내 메세지 왕복 latency |      500us      |
| 디스크 탐색 |  10ms(1천만 ns)   |
| 네트워크에서 1MB 순차 READ | 10MS|
| 디스크에서 1MB 순차 READ | 30MS |
| 1개 패킷의 캘리포니아에서 네덜란드까지 왕복 지연시간 | 150MS|

### 가용성 관련 수치들
고가용성이란, 시스템이 오랜 시간동안 지속적으로 중단 없이 운영될 수 있는 능력
* 100% = 시스템이 단 한번도 중단된 적이 없다. 
* 대부분의 시스템은 99% ~ 100% 사이의 값을 갖는다.
* 99%란 대략 하루 장애시간이 14.5분 정도인 서비스를 말한다.

## 예제 : 트위터 QPS(Query for second)와 저장소 요구량 추정

* 가정 
* MAU는 3억
* DAU는 50%
* 각 사용자는 매일 2건의 트위터 게시글을 올린다.
* 미디어 포함 트위터 게시물은 약 10%이다.
* 데이터는 5년간 보관된다.

QPS 추정치
* MAU = 1.5억
* QPS = 1.5억 * 2 트윗 / 24시간 / 3600초 = 약 3500
* 최대 QPS = 3500 * 2 = 7000

미디어 저장을 위한 저장소 요구량
* 평균 트윗 크기
* 미디어 1MB, 텍스트 140 Bytes
* 미디어 저장소 요구량 : 1.5억 * 2 * 10% * 1MB = 30TB/일
* 5년간 미디어를 보관하려면 ? : 30TB * 365 * 5 = 약 55PB

### 팁
* 적절한 근사치를 활용하라.
* 가정은 적어두자
* 수치는 단위를 함께 붙여 헷갈리지 않게 하자.
* QPS, 최대 QPS, 저장소 요구량, 서버 수, 캐시 요구량 등이 빈출된다.

